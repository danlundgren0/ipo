<div class="modal fade report-modal" id="genericModalReport" tabindex="-1" role="dialog" aria-labelledby="genericModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <button type="button" class="btn btn-secondary" data-estate="{report.estateUid}"  data-report="{report.reportUid}" aria-pressed="false" style="float:right;margin-right: 20px;">Exportera PDF</button>
        <h4 class="modal-title" id="myModalLabel">
    		<f:if condition="{report.pageLink}">
    			<f:then>
		    		<f:link.page pageUid="{report.pageLink}" class="estate-link" target="_blank">
		    			Fastighet {report.estateName} <span class="glyphicon glyphicon-link" aria-hidden="true"></span>
		    		</f:link.page>
		    		<span class="ext-header"> - Komplett rapport</span>
    			</f:then>
    			<f:else>
    				Fastighet {report.estateName}<span class="ext-header"> - Komplett rapport</span>
    			</f:else>
    		</f:if>        	 
        </h4>        
      </div>
      <div class="modal-body">
        		<div class="jumbotron">
        			<h2>Rapport {report.reportName}</h2>
	        		<div class="col-md-4">Version: {report.reportVersion} </div>
	        		<div class="col-md-4">Datum: {report.reportDate}</div>
	        		<div class="col-md-4">Nod: {report.nodeTypeName}</div>

	        		<div class="col-md-4">Ansvarig tekniker: {report.respTechnicianName} </div>
	        		<div class="col-md-4">Utförande tekniker: {report.execTechnicianName}</div>
	        		<div class="col-md-4">Rapport id: {report.reportUid}</div>
	        		

	        		<div class="col-md-4">Kritiska anm: {report.noOfAllCriticalRemarks} </div>
	        		<div class="col-md-4">Anmärkningar: {report.noOfAllRemarks}</div>
	        		<div class="col-md-4">Inköp/Med.: {report.noOfAllPurchases}</div>

	        		<div class="col-md-4">Ok: {report.getNoOfOk} </div>
	        		<div class="col-md-4">Rapporterade noteringar: {report.noOfPostedNotes}</div>
	        		<div class="col-md-4">Pågående noteringar: {report.noOfOngoingNotes}</div>

	        		<div class="col-md-4">Rapporterade mätvärden: {report.noOfPostedMeasure} </div>
	        		<div class="col-md-4">Rapporterade Punkter: {report.noOfQuestionsReported}</div>
	        		<div class="col-md-4">Ej Rapporterade Punkter: {report.noOfQuestionsLeft}</div>
	        		<div style="clear:both;"></div>
        		</div>
        	<f:for each="{report.controlPoints}" as="cp">
        		<div class="cp-container">
	        		<h2>Kontrollpunkt: {cp.cpName}</h2>
		        	<f:for each="{cp.questions}" as="q">
		        		<h3>Delpunkt: {q.questionName}</h3>
		        		<div class="jumbotron {q.status}">
			        		<div class="col-md-6">
			        			<f:if condition="{q.type}=='measure'">			        				
			        				<f:then>			        					
			        					<f:for each="{q.notes}" as="n">
			        					Version: {report.reportVersion}<br>
			        					Mätvärde: {n.value} {n.measName} ({n.unit})<br>
			        					</f:for>
			        				</f:then>
			        				<f:else>
			        					<f:if condition="{q.type}=='note'">
			        						<f:then>
			        							<f:for each="{q.notes}" as="n">
			        								<f:if condition="{n.remarkType}==1">
			        									<div>
			        									Version: {report.reportVersion}<br>
			        									Status: OK:<br>
			        									Kommentar: {n.comment}<br>
			        									</div>
			        								</f:if>
			        								<f:if condition="{n.remarkType}==2">
			        									<div style="color:red;">
			        									Version: {report.reportVersion}<br>
			        									Status: Kritisk:<br>
			        									Kommentar: {n.comment}<br>
			        									</div>
			        								</f:if>
			        								<f:if condition="{n.remarkType}==3">
			        									<div style="color:red;">
			        									Version: {report.reportVersion}<br>
			        									Status: Anmärkning:<br>
			        									Kommentar: {n.comment}<br>
			        									</div>
			        								</f:if>
			        								<f:if condition="{n.remarkType}==4">
			        									<div style="color:red;">
			        									Version: {report.reportVersion}<br>
			        									Status: Meddelande:<br>
			        									Kommentar: {n.comment}<br>
			        									</div>
			        								</f:if>
			        							</f:for>
			        						</f:then>
			        						<f:else>
			        							Ej rapporterad
			        						</f:else>
			        					</f:if>
			        				</f:else>
			        			</f:if>
			        		</div>
			        		<div class="col-md-6">
			        			<f:for each="{q.notes}" as="n">
				        			<f:if condition="{n.image}">
							            <div class="item-img">
							                <img src="{n.image}" class="img-responsive" />
							            </div>		        				
				        			</f:if>
			        			</f:for>
			        		</div>
		        			<div style="clear:both;"></div>	
		        		</div>	        		
		        	</f:for>  
	        	</div>      		
        	</f:for>
        </div>
    </div>
  </div>
</div>
